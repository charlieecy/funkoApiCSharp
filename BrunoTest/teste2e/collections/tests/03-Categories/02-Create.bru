meta {
  name: 02-Create
  type: http
  seq: 2
}

post {
  url: {{baseUrl}}/Categories
  body: json
  auth: bearer
}

auth:bearer {
  token: {{jwtToken}}
}

body:json {
  {
    "nombre": "Category_{{timestamp}}"
  }
}

script:pre-request {
  const timestamp = new Date().getTime();
  bru.setVar("timestamp", timestamp);
}

script:post-response {
  if (res.status === 201) {
    const body = res.getBody();
    if (body && body.id) {
      bru.setEnvVar("categoryId", body.id);
    }
  }
}

assert {
  res.status: eq 201
  res.body.id: isString
  res.body.nombre: contains Category
}
